<html>
  <head>
    <title>Run</title>
  </head>
  <body>
    <h1>Run</h1>
    <ul id="log">
      <li>Opening websocket</li>
    </ul>
    <script>
      function log(text) {
        let liNode = document.createElement("li");
        liNode.appendChild(document.createTextNode(text));
        document.getElementById("log").appendChild(liNode);
      }

      let webSocket = new WebSocket("/run-script");
      webSocket.onopen(() => { log("websocket connected"); });
      webSocket.onmessage((evt) => log("server: " + evt.data));
      webSocket.onerror((evt) => log("websocket error"));
      webSocket.onclose((evt) => log("websocket disconnected"));
    </script>
  </body>
</html>